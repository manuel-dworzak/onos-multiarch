docker buildx rm onos_builder | true
docker run --rm --privileged multiarch/qemu-user-static --reset -p yes
docker run --rm --privileged docker/binfmt:a7996909642ee92942dcd6cff44b9b95f08dad64
docker buildx create --name onos_builder
docker buildx use onos_builder
docker buildx inspect --bootstrap

# local test for each architecture
docker buildx build --platform linux/amd64 -t thanhledev/onos-multiarch:amd64 --output type=docker .
docker buildx build --platform linux/arm64 -t thanhledev/onos-multiarch:arm64 --output type=docker .

docker run -it --name onos --rm --privileged \
 -e ONOS_APPS=gui2,openflow,de.uniba.ktr.crma,fwd \
 -p 8181:8181 -p 8101:8101 -p 6653:6653 -p 6640:6640 \
 thanhledev/onos-multiarch:amd64